<div class="row">
  <div class="col-12">
    <h3 class="mt-4">User</h3>
    <hr />
    <h5 class="mt-3">Top 10 FRC Holders</h5>
    <table class="table">
      <thead class="thead-light">
        <tr>
          <th scope="col">USER NAME</th>
          <th scope="col">TOTAL FRC AVAILABLE</th>
          <th scope="col">TOTLA FRC EARNED</th>
          <th scope="col">TOTAL FRC SPENT</th>
        </tr>
      </thead>
      <tbody data-simple-table data-url="/topUsers.json">
        <script type="text/x-handlebars-template" data-row-template>
          <tr>
            <td>{{address}}</td>
            <td>{{tokens_bt}}</td>
            <td>{{tokens_earned_bt}}</td>
            <td>{{tokens_spent_bt}}</td>
          </tr>
        </script>
      </tbody>
    </table>
  </div>
</div>

<% content_for :end_js do %>

  <script type="text/javascript">
    Handlebars.registerHelper('tokens_bt', function(response, options ) {
      var rowData =  response.data.root || {}
        , val     = rowData.tokens
      ;
      val = web3.fromWei( val, "ether" );
      return PriceOracle.toBt( val );
    });
    Handlebars.registerHelper('tokens_earned_bt', function(response, options ) {
      var rowData =  response.data.root || {}
        , val     = rowData.tokens_earned
      ;
      val = web3.fromWei( val, "ether" );
      return PriceOracle.toBt( val ).toString( 10 );
    });
    Handlebars.registerHelper('tokens_spent_bt', function(response, options ) {
      var rowData =  response.data.root || {}
        , val     = rowData.tokens_spent
      ;
      val = web3.fromWei( val, "ether" );
      return PriceOracle.toBt( val ).toString( 10 );
    });
  </script>
<% end %>

